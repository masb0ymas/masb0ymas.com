---
import { readAll } from "~/lib/markdoc/read";
import { blog } from "../lib/markdoc/frontmatter.schema";
import Search from "./Search.tsx";

const allPosts = await readAll({
  directory: "blog",
  frontmatterSchema: blog,
});

const posts = allPosts.filter(
  (post) => !post.frontmatter.draft && post.frontmatter.title
);
---

<Search client:load searchList={posts} />
